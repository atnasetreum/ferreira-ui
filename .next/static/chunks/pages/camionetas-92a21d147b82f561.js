(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[230],{6540:function(e,t,a){"use strict";var n=a(4836);t.Z=void 0;var i=n(a(4938)),l=a(5893),c=(0,i.default)((0,l.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.Z=c},3343:function(e,t,a){"use strict";var n=a(4836);t.Z=void 0;var i=n(a(4938)),l=a(5893),c=(0,i.default)((0,l.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");t.Z=c},7957:function(e,t,a){"use strict";var n=a(4836);t.Z=void 0;var i=n(a(4938)),l=a(5893),c=(0,i.default)((0,l.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");t.Z=c},1170:function(e,t,a){"use strict";var n=a(4836);t.Z=void 0;var i=n(a(4938)),l=a(5893),c=(0,i.default)([(0,l.jsx)("circle",{cx:"12",cy:"12",r:"3.2"},"0"),(0,l.jsx)("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"},"1")],"PhotoCamera");t.Z=c},6629:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/camionetas",function(){return a(137)}])},4112:function(e,t,a){"use strict";a.d(t,{m:function(){return l},d:function(){return n.d}});var n=a(7889),i=a(7294);let l=function(e){let[t,a]=(0,i.useState)(e),[n,l]=(0,i.useState)("");return(0,i.useEffect)(()=>{let e="";for(let a in t){let n=t[a];n&&(e=""===e?"?".concat(a,"=").concat(n):e+"&".concat(a,"=").concat(n))}console.log({params:e}),l(e)},[t]),{filters:t,setFilters:a,querystring:n}}},7889:function(e,t,a){"use strict";a.d(t,{d:function(){return i}});var n=a(5678);let i=()=>{let e=(e,t)=>{(0,n.Am)(e,{hideProgressBar:!1,autoClose:2e3,type:null!=t?t:"warning",position:"top-right"})};return{notify:e}}},137:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return _}});var n=a(5893),i=a(6863),l=a(1057),c=a(6886),r=a(3318),s=a(7294),d=a(6308),o=a(629),u=a(1903),h=a(3946),m=a(6818),x=a(3343),j=a(4112),p=a(1170),g=a(8126);let f={logistica:null,placa:"",image:null},v=e=>{let{setAction:t,getCamionetas:a,camionetaSelected:r,setCamionetaSelected:v}=e,[Z,C]=(0,s.useState)(f),[b,k]=(0,s.useState)(0),{notify:P}=(0,j.d)();(0,s.useEffect)(()=>{Object.keys(r).length&&!b&&(k(r.id),C({placa:r.placa,image:null,logistica:null}))},[r,b]);let w=()=>{let e=Z.placa.trim(),n=Z.logistica;if(!n)return P("Seleccione una logistica");if(!e)return P("Agregue la placa de la camioneta");let i=new FormData;i.append("placa",e),i.append("logisticaId",n.id.toString()),Z.image&&i.append("image",Z.image),b?d.BC.update(b,i).then(()=>{P("Placa actualizada correctamente","success"),t(""),a(),v({}),k(0)}).catch(e=>{var t,a;return P((null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)||e.message)}):d.BC.create(i).then(()=>{P("Placa creada correctamente","success"),t(""),a()}).catch(e=>{var t,a;return P((null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)||e.message)})};return(0,n.jsxs)(c.ZP,{container:!0,spacing:1,children:[(0,n.jsx)(c.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,n.jsx)(o.Z,{children:(0,n.jsx)(g.yO,{value:Z.logistica,onChange:e=>C({...Z,logistica:e})})})}),(0,n.jsx)(c.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,n.jsx)(o.Z,{children:(0,n.jsx)(u.Z,{label:"Placa",fullWidth:!0,value:Z.placa,onChange:e=>{let{target:{value:t}}=e;return C({...Z,placa:t})}})})}),(0,n.jsx)(c.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,n.jsxs)(h.Z,{color:"primary","aria-label":"upload picture",component:"label",children:[(0,n.jsx)("input",{hidden:!0,accept:"image/*",type:"file",onChange:e=>{let t=e.target.files;t&&t.length>0&&C({...Z,image:t[0]})}}),(0,n.jsx)(p.Z,{})]})}),(0,n.jsx)(c.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,n.jsxs)(i.Z,{"aria-label":"outlined primary button group",fullWidth:!0,children:[(0,n.jsx)(l.Z,{variant:"outlined",fullWidth:!0,startIcon:(0,n.jsx)(x.Z,{}),sx:{mt:1},onClick:()=>{t(""),v({}),k(0)},children:"Cancelar"}),(0,n.jsx)(l.Z,{variant:"contained",fullWidth:!0,startIcon:(0,n.jsx)(m.Z,{}),sx:{mt:1},onClick:w,children:"Guardar"})]})})]})};var Z=a(7906),C=a(295),b=a(2882),k=a(3184),P=a(1459),w=a(7957),A=a(1733),S=function(e){let{camionetas:t,getCamionetas:a,setCamionetaSelected:l,setAction:c}=e,{notify:r}=(0,j.d)();return(0,n.jsx)(b.Z,{component:o.Z,children:(0,n.jsxs)(Z.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,n.jsx)(k.Z,{children:(0,n.jsxs)(g.AF,{children:[(0,n.jsx)(g.Yk,{children:"ID"}),(0,n.jsx)(g.Yk,{children:"Placa"}),(0,n.jsx)(g.Yk,{children:"Logistica"}),(0,n.jsx)(g.Yk,{children:"Fecha Creacion"}),(0,n.jsx)(g.Yk,{children:"Fecha de ultima actualizacion"}),(0,n.jsx)(g.Yk,{children:"Acciones"})]})}),(0,n.jsx)(C.Z,{children:t.map(e=>(0,n.jsxs)(g.AF,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,n.jsx)(g.Yk,{component:"th",scope:"row",children:e.id}),(0,n.jsx)(g.Yk,{children:e.placa}),(0,n.jsx)(g.Yk,{children:e.logistica.name}),(0,n.jsx)(g.Yk,{children:(0,P.jH)(e.createdAt)}),(0,n.jsx)(g.Yk,{children:(0,P.jH)(e.updatedAt)}),(0,n.jsx)(g.Yk,{children:(0,n.jsxs)(i.Z,{"aria-label":"outlined primary button group",children:[(0,n.jsx)(h.Z,{color:"warning","aria-label":"update row",component:"label",onClick:()=>{c("edit"),l(e)},children:(0,n.jsx)(w.Z,{})}),(0,n.jsx)(h.Z,{color:"error","aria-label":"delete row",component:"label",onClick:()=>d.BC.remove(e.id).then(()=>{r("Placa eliminada correctamente","success"),a()}).catch(e=>{var t,a;return r((null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)||e.message)}),children:(0,n.jsx)(A.Z,{})})]})})]},e.id))})]})})},Y=a(6540),_=function(){let[e,t]=(0,s.useState)(""),[a,o]=(0,s.useState)([]),[u,h]=(0,s.useState)({}),m=()=>{d.BC.getAll().then(o)};return(0,s.useEffect)(()=>{m()},[]),(0,n.jsx)(r.Z,{title:"Camionetas",children:(0,n.jsxs)(c.ZP,{container:!0,spacing:1,children:[["add","edit"].includes(e)&&(0,n.jsx)(c.ZP,{item:!0,xs:12,md:12,lg:12,children:(0,n.jsx)(v,{setAction:t,getCamionetas:m,camionetaSelected:u,setCamionetaSelected:h})}),""===e&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.ZP,{item:!0,xs:12,md:12,lg:12,children:(0,n.jsx)(i.Z,{variant:"contained","aria-label":"outlined primary button group",children:(0,n.jsx)(l.Z,{startIcon:(0,n.jsx)(Y.Z,{}),onClick:()=>t("add"),children:"Agregar"})})}),(0,n.jsx)(c.ZP,{item:!0,xs:12,md:12,lg:12,children:(0,n.jsx)(S,{camionetas:a,getCamionetas:m,setCamionetaSelected:h,setAction:t})})]})]})})}},1459:function(e,t,a){"use strict";a.d(t,{j5:function(){return r},jH:function(){return l},p6:function(){return c}});var n=a(381),i=a.n(n);a(5655);let l=e=>i()(e).format("LLLL a"),c=e=>i()(e).format("LL"),r=e=>{let[t,a,n]=e.split("-");return new Date(Number(t),Number(a)-1,Number(n))}}},function(e){e.O(0,[885,58,519,433,786,980,840,318,774,888,179],function(){return e(e.s=6629)}),_N_E=e.O()}]);