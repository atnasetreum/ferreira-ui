(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[15],{2676:function(e,l,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sellers",function(){return n(4005)}])},4005:function(e,l,n){"use strict";n.r(l),n.d(l,{default:function(){return eG}});var i=n(5893),r=n(6886),t=n(629),a=n(1057),s=n(7294),d=n(7314),o=n(2734),c=n(2293),u=n(1703),x=n(44),h=n(5861),m=n(7357),j=n(1903),g=n(3946),p=n(6861),Z=n(6540),f=n(9521),b=n(7179),v=n(9272),k=n(9294),C=n(6963),P=n(7145),w=n.n(P),y=n(7957),F=n(1733),S=n(6863),U=n(5675),A=n.n(U),W=n(8854),R=n(7906),Y=n(295),I=n(2882),D=n(3184),O=n(2610),N=n(4666),E=n(1425),_=n(6580),z=n(7645),H=n(4386),L=n(8752),T=n(7279);function Q(e){let{referencia:l,setRefSelected:n,setForm:r,form:t,sellerSelected:s}=e,d=e=>{if(e){let{referencias:i}=t,a=i.findIndex(e=>e.id===l.id),s=[...i];s[a]=l,r({...t,referencias:s}),n({})}else n({})};return(0,i.jsxs)(N.Z,{open:!0,onClose:()=>d(),children:[(0,i.jsx)(z.Z,{children:"Referencia"}),(0,i.jsxs)(_.Z,{children:[(0,i.jsx)(j.Z,{autoFocus:!0,margin:"dense",label:"Descripcion",fullWidth:!0,variant:"standard",autoComplete:"off",value:l.description,onChange:e=>{let{target:{value:i}}=e;return n({...l,description:i})}}),(0,i.jsx)(j.Z,{autoFocus:!0,margin:"dense",label:"Link de la ubicacion",fullWidth:!0,variant:"standard",autoComplete:"off",value:l.linkUbicacion,onChange:e=>{let{target:{value:i}}=e;return n({...l,linkUbicacion:i})}}),(0,i.jsxs)("center",{children:[(e=>{if(e)return(0,i.jsx)(A(),{src:URL.createObjectURL(e),alt:"",width:150,height:150});if(Object.keys(s).length){let n=l.id,r=s.references.find(e=>e.id.toString()===n);if(r&&r.image)return(0,i.jsx)(A(),{src:(0,T.F)(r.image),alt:"",width:150,height:150})}return null})(l.image),(0,i.jsx)("br",{}),(0,i.jsxs)(S.Z,{"aria-label":"outlined primary button group",children:[(0,i.jsxs)(g.Z,{color:"primary","aria-label":"upload picture",component:"label",children:[(0,i.jsx)("input",{hidden:!0,accept:"image/*",type:"file",onChange:e=>{let i=e.target.files;i&&i.length>0&&n({...l,image:i[0]})}}),l.image?(0,i.jsx)(H.Z,{title:"Actualizar imagen",children:(0,i.jsx)(L.Z,{})}):(0,i.jsx)(H.Z,{title:"Agregar imagen",children:(0,i.jsx)(p.Z,{})})]}),l.image&&(0,i.jsx)(H.Z,{title:"Eliminar imagen",children:(0,i.jsx)(g.Z,{color:"error","aria-label":"upload picture",component:"label",onClick:()=>n({...l,image:null}),children:(0,i.jsx)(F.Z,{})})})]})]})]}),(0,i.jsxs)(E.Z,{children:[(0,i.jsx)(a.Z,{onClick:()=>d(),children:"Cancelar"}),(0,i.jsx)(a.Z,{onClick:()=>d("ok"),variant:"contained",children:"Actualizar"})]})]})}let M=e=>{let{columns:l,form:n,form:{referencias:r},setForm:t}=e,a=s.useCallback(e=>e.id,[]),{getTableProps:d,getTableBodyProps:o,headerGroups:c,rows:u,prepareRow:x}=(0,f.useTable)({data:r,columns:l,getRowId:a}),h=(e,l)=>{let i=r[e];t({...n,referencias:w()(r,{$splice:[[e,1],[l,0,i]]}).map((e,l)=>({...e,order:l+1}))})};return(0,i.jsx)(b.W,{backend:C.PD,children:(0,i.jsxs)(R.Z,{...d(),children:[(0,i.jsx)(D.Z,{children:c.map(e=>{let{key:l,...n}=e.getHeaderGroupProps();return(0,i.jsxs)(W.AF,{...n,children:[(0,i.jsx)(W.Yk,{}),e.headers.map(e=>{let{key:l,...n}=e.getHeaderProps();return(0,i.jsx)(W.Yk,{align:"center",...n,children:e.render("Header")},l)})]},l)})}),(0,i.jsx)(Y.Z,{...o(),children:u.map((e,l)=>null!==x(e)&&x(e)||(0,i.jsx)(G,{index:l,row:e,moveRow:h,...e.getRowProps()}))})]})})},G=e=>{let{row:l,index:n,moveRow:r}=e,t=s.useRef(null),a=s.useRef(null),[,d]=(0,v.L)({accept:"row",hover(e,l){if(!t.current)return;let i=e.index;if(i===n)return;let a=t.current.getBoundingClientRect(),s=(a.bottom-a.top)/2,d=l.getClientOffset(),o=d.y-a.top;i<n&&o<s||i>n&&o>s||(r(i,n),e.index=n)}}),[{isDragging:o},c,u]=(0,k.c)({type:"row",item:{type:"row",index:n},collect:e=>({isDragging:e.isDragging()})});return u(d(t)),c(a),(0,i.jsxs)(W.AF,{ref:t,style:{opacity:o?0:1},children:[(0,i.jsx)(W.Yk,{align:"center",ref:a,children:(0,i.jsx)(O.Z,{})}),l.cells.map(e=>{let{key:l,...n}=e.getCellProps();return(0,i.jsx)(W.Yk,{align:"center",...n,children:e.render("Cell")},l)})]})},B=e=>{let{form:l,setForm:n,sellerSelected:r}=e,[t,a]=(0,s.useState)({}),d=(0,s.useCallback)((e,i)=>{switch(e){case"editRow":let r=l.referencias.find(e=>e.id===i);r&&a(r);break;case"deleteRow":let t=l.referencias.filter(e=>e.id!==i).map((e,l)=>({...e,order:l+1}));n({...l,referencias:t})}},[l.referencias]),o=s.useMemo(()=>[{Header:"Orden",accessor:"order"},{Header:"Descripcion",accessor:"description"},{Header:"Ubicacion",accessor:"linkUbicacion"},{Header:"Imagen",accessor:"image",Cell:e=>{if(e.value)return(0,i.jsx)(A(),{src:URL.createObjectURL(e.value),alt:"",width:150,height:150});if(Object.keys(r).length){let l=e.row.id,n=r.references.find(e=>e.id.toString()===l);if(n&&n.image)return(0,i.jsx)(A(),{src:(0,T.F)(n.image),alt:"",width:150,height:150})}return null}},{Header:"Acciones",accessor:"id",Cell:e=>{let{value:l}=e;return(0,i.jsxs)(S.Z,{"aria-label":"outlined primary button group",children:[(0,i.jsx)(g.Z,{color:"warning","aria-label":"update row",component:"label",onClick:()=>d("editRow",l),children:(0,i.jsx)(y.Z,{})}),(0,i.jsx)(g.Z,{color:"error","aria-label":"delete row",component:"label",onClick:()=>d("deleteRow",l),children:(0,i.jsx)(F.Z,{})})]})}}],[d,r]);return(0,i.jsxs)(i.Fragment,{children:[!!Object.keys(t).length&&(0,i.jsx)(Q,{referencia:t,setRefSelected:a,form:l,setForm:n,sellerSelected:r}),(0,i.jsx)(I.Z,{children:(0,i.jsx)(M,{columns:o,form:l,setForm:n})})]})},q={description:"",linkUbicacion:"",image:null},J=e=>{let{form:l,setForm:n,sellerSelected:d}=e,[o,c]=(0,s.useState)(q);return(0,i.jsxs)(r.ZP,{container:!0,spacing:1,sx:{mt:1,mb:1},children:[(0,i.jsx)(r.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,i.jsx)(t.Z,{children:(0,i.jsx)(j.Z,{label:"Descripcion",variant:"outlined",fullWidth:!0,autoComplete:"off",value:o.description,onChange:e=>{let{target:{value:l}}=e;return c({...o,description:l})}})})}),(0,i.jsx)(r.ZP,{item:!0,xs:12,md:6,lg:2,children:(0,i.jsx)(t.Z,{children:(0,i.jsx)(j.Z,{label:"Link de la ubicacion",variant:"outlined",fullWidth:!0,autoComplete:"off",value:o.linkUbicacion,onChange:e=>{let{target:{value:l}}=e;return c({...o,linkUbicacion:l})}})})}),(0,i.jsx)(r.ZP,{item:!0,xs:12,md:6,lg:2,container:!0,children:(0,i.jsxs)(g.Z,{color:"primary","aria-label":"upload picture",component:"label",children:[(0,i.jsx)("input",{hidden:!0,accept:"image/*",type:"file",onChange:e=>{let l=e.target.files;l&&l.length>0&&c({...o,image:l[0]})}}),(0,i.jsx)(p.Z,{fontSize:"large"}),(0,i.jsxs)(h.Z,{variant:"subtitle1",gutterBottom:!0,sx:{mt:1},children:[o.image&&o.image.name.substring(0,10),"..."]})]})}),(0,i.jsx)(r.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,i.jsx)(a.Z,{sx:{mt:1},fullWidth:!0,variant:"contained",startIcon:(0,i.jsx)(Z.Z,{}),disabled:!o.description.trim(),onClick:()=>{let e=l.referencias.length+1;n({...l,referencias:[...l.referencias,{...o,order:e,id:"new".concat(e)}]}),c(q)},children:"Agregar"})}),!!l.referencias.length&&(0,i.jsx)(r.ZP,{item:!0,xs:12,md:12,lg:12,sx:{mt:4},children:(0,i.jsx)(B,{form:l,setForm:n,sellerSelected:d})})]})};function V(e){let{telefono:l,setRefSelected:n,setForm:r,form:t}=e,s=e=>{if(e){let{telefonos:i}=t,a=i.findIndex(e=>e.id===l.id),s=[...i];s[a]=l,r({...t,telefonos:s}),n({})}else n({})};return(0,i.jsxs)(N.Z,{open:!0,onClose:()=>s(),children:[(0,i.jsx)(z.Z,{children:"Referencia Telefonica"}),(0,i.jsxs)(_.Z,{children:[(0,i.jsx)(j.Z,{autoFocus:!0,margin:"dense",label:"Nombre",fullWidth:!0,variant:"standard",autoComplete:"off",value:l.name,onChange:e=>{let{target:{value:i}}=e;return n({...l,name:i})}}),(0,i.jsx)(j.Z,{autoFocus:!0,margin:"dense",label:"Telefono",fullWidth:!0,variant:"standard",autoComplete:"off",value:l.phone,onChange:e=>{let{target:{value:i}}=e;return n({...l,phone:i})}})]}),(0,i.jsxs)(E.Z,{children:[(0,i.jsx)(a.Z,{onClick:()=>s(),children:"Cancelar"}),(0,i.jsx)(a.Z,{onClick:()=>s("ok"),variant:"contained",children:"Actualizar"})]})]})}let X=e=>{let{columns:l,form:n,form:{telefonos:r},setForm:t}=e,a=s.useCallback(e=>e.id,[]),{getTableProps:d,getTableBodyProps:o,headerGroups:c,rows:u,prepareRow:x}=(0,f.useTable)({data:r,columns:l,getRowId:a}),h=(e,l)=>{let i=r[e];t({...n,telefonos:w()(r,{$splice:[[e,1],[l,0,i]]}).map((e,l)=>({...e,order:l+1}))})};return(0,i.jsx)(b.W,{backend:C.PD,children:(0,i.jsxs)(R.Z,{...d(),children:[(0,i.jsx)(D.Z,{children:c.map(e=>{let{key:l,...n}=e.getHeaderGroupProps();return(0,i.jsxs)(W.AF,{...n,children:[(0,i.jsx)(W.Yk,{}),e.headers.map(e=>{let{key:l,...n}=e.getHeaderProps();return(0,i.jsx)(W.Yk,{align:"center",...n,children:e.render("Header")},l)})]},l)})}),(0,i.jsx)(Y.Z,{...o(),children:u.map((e,l)=>null!==x(e)&&x(e)||(0,i.jsx)($,{index:l,row:e,moveRow:h,...e.getRowProps()}))})]})})},$=e=>{let{row:l,index:n,moveRow:r}=e,t=s.useRef(null),a=s.useRef(null),[,d]=(0,v.L)({accept:"row",hover(e,l){if(!t.current)return;let i=e.index;if(i===n)return;let a=t.current.getBoundingClientRect(),s=(a.bottom-a.top)/2,d=l.getClientOffset(),o=d.y-a.top;i<n&&o<s||i>n&&o>s||(r(i,n),e.index=n)}}),[{isDragging:o},c,u]=(0,k.c)({type:"row",item:{type:"row",index:n},collect:e=>({isDragging:e.isDragging()})});return u(d(t)),c(a),(0,i.jsxs)(W.AF,{ref:t,style:{opacity:o?0:1},children:[(0,i.jsx)(W.Yk,{align:"center",ref:a,children:(0,i.jsx)(O.Z,{})}),l.cells.map(e=>{let{key:l,...n}=e.getCellProps();return(0,i.jsx)(W.Yk,{align:"center",...n,children:e.render("Cell")},l)})]})},K=e=>{let{form:l,setForm:n}=e,[r,t]=(0,s.useState)({}),a=(0,s.useCallback)((e,i)=>{switch(e){case"editRow":let r=l.telefonos.find(e=>e.id===i);r&&t(r);break;case"deleteRow":let a=l.telefonos.filter(e=>e.id!==i).map((e,l)=>({...e,order:l+1}));n({...l,telefonos:a})}},[l.telefonos]),d=s.useMemo(()=>[{Header:"Orden",accessor:"order"},{Header:"Nombre",accessor:"name"},{Header:"Telefono",accessor:"phone"},{Header:"Acciones",accessor:"id",Cell:e=>{let{value:l}=e;return(0,i.jsxs)(S.Z,{"aria-label":"outlined primary button group",children:[(0,i.jsx)(g.Z,{color:"warning","aria-label":"update row",component:"label",onClick:()=>a("editRow",l),children:(0,i.jsx)(y.Z,{})}),(0,i.jsx)(g.Z,{color:"error","aria-label":"delete row",component:"label",onClick:()=>a("deleteRow",l),children:(0,i.jsx)(F.Z,{})})]})}}],[a]);return(0,i.jsxs)(i.Fragment,{children:[!!Object.keys(r).length&&(0,i.jsx)(V,{telefono:r,setRefSelected:t,form:l,setForm:n}),(0,i.jsx)(I.Z,{children:(0,i.jsx)(X,{columns:d,form:l,setForm:n})})]})},ee={name:"",phone:""},el=e=>{let{form:l,setForm:n}=e,[d,o]=(0,s.useState)(ee);return(0,i.jsxs)(r.ZP,{container:!0,spacing:1,sx:{mt:2,mb:2},children:[(0,i.jsx)(r.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,i.jsx)(t.Z,{children:(0,i.jsx)(j.Z,{label:"Nombre",variant:"outlined",fullWidth:!0,value:d.name,onChange:e=>{let{target:{value:l}}=e;return o({...d,name:l})}})})}),(0,i.jsx)(r.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,i.jsx)(t.Z,{children:(0,i.jsx)(j.Z,{label:"Telefono",variant:"outlined",fullWidth:!0,value:d.phone,onChange:e=>{let{target:{value:l}}=e;return o({...d,phone:l})}})})}),(0,i.jsx)(r.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,i.jsx)(a.Z,{fullWidth:!0,variant:"contained",startIcon:(0,i.jsx)(Z.Z,{}),sx:{mt:1},disabled:!d.name.trim()||!d.phone.trim(),onClick:()=>{let e=l.telefonos.length+1;n({...l,telefonos:[...l.telefonos,{...d,order:e,id:"new".concat(e)}]}),o(ee)},children:"Agregar"})}),!!l.telefonos.length&&(0,i.jsx)(r.ZP,{item:!0,xs:12,md:12,lg:12,sx:{mt:4},children:(0,i.jsx)(K,{form:l,setForm:n})})]})};var en=n(3203);let ei=e=>{let{form:l,setForm:n,initialForm:d,sellerSelected:o}=e,[c,u]=(0,s.useState)("");return(0,s.useEffect)(()=>{if(!l.image){u("");return}let e=URL.createObjectURL(l.image);return u(e),()=>URL.revokeObjectURL(e)},[l]),(0,i.jsxs)(r.ZP,{container:!0,spacing:1,children:[(0,i.jsx)(r.ZP,{item:!0,xs:12,md:6,lg:2,children:(0,i.jsx)(t.Z,{children:(0,i.jsx)(j.Z,{label:"ID",variant:"outlined",fullWidth:!0,autoComplete:"off",value:l.id,onChange:e=>{let{target:{value:i}}=e;return n({...l,id:i})}})})}),(0,i.jsx)(r.ZP,{item:!0,xs:12,md:6,lg:2,children:(0,i.jsx)(t.Z,{children:(0,i.jsx)(j.Z,{label:"Nombre",variant:"outlined",fullWidth:!0,autoComplete:"off",value:l.nombre,onChange:e=>{let{target:{value:i}}=e;return n({...l,nombre:i})}})})}),(0,i.jsx)(r.ZP,{item:!0,xs:12,md:6,lg:2,children:(0,i.jsx)(t.Z,{children:(0,i.jsx)(W.EV,{entidad:l.estado,setEntidad:e=>{e?n({...l,estado:e}):n({...l,estado:e,municipio:null,ciudad:null})}})})}),(0,i.jsx)(r.ZP,{item:!0,xs:12,md:6,lg:2,children:(0,i.jsx)(t.Z,{children:(0,i.jsx)(W.tF,{entidad:l.estado,municipio:l.municipio,setMunicipio:e=>{e?n({...l,municipio:e}):n({...l,municipio:e,ciudad:null})}})})}),(0,i.jsx)(r.ZP,{item:!0,xs:12,md:6,lg:2,children:(0,i.jsx)(t.Z,{children:(0,i.jsx)(W.E5,{entidad:l.estado,municipio:l.municipio,ciudad:l.ciudad,setCiudad:e=>n({...l,ciudad:e})})})}),(0,i.jsx)(r.ZP,{item:!0,xs:12,md:6,lg:2,children:(0,i.jsx)(t.Z,{children:(0,i.jsx)(j.Z,{label:"Colonia",variant:"outlined",fullWidth:!0,autoComplete:"off",value:l.colonia,onChange:e=>{let{target:{value:i}}=e;return n({...l,colonia:i})}})})}),(0,i.jsx)(r.ZP,{item:!0,xs:12,md:6,lg:2,children:(0,i.jsx)(t.Z,{children:(0,i.jsx)(j.Z,{label:"Calle",variant:"outlined",fullWidth:!0,autoComplete:"off",value:l.calle,onChange:e=>{let{target:{value:i}}=e;return n({...l,calle:i})}})})}),(0,i.jsx)(r.ZP,{item:!0,xs:12,md:6,lg:2,children:(0,i.jsx)(t.Z,{children:(0,i.jsx)(j.Z,{label:"Numero",variant:"outlined",fullWidth:!0,autoComplete:"off",value:l.numero,onChange:e=>{let{target:{value:i}}=e;return n({...l,numero:i})}})})}),(0,i.jsx)(r.ZP,{item:!0,xs:12,md:6,lg:2,children:(0,i.jsx)(t.Z,{children:(0,i.jsx)(j.Z,{label:"Codigo postal",variant:"outlined",fullWidth:!0,autoComplete:"off",value:l.cp,onChange:e=>{let{target:{value:i}}=e;return n({...l,cp:i})}})})}),(0,i.jsx)(r.ZP,{item:!0,xs:12,md:6,lg:2,children:(0,i.jsx)(t.Z,{children:(0,i.jsx)(j.Z,{label:"Link de la ubicacion",variant:"outlined",fullWidth:!0,autoComplete:"off",value:l.linkUbicacion,onChange:e=>{let{target:{value:i}}=e;return n({...l,linkUbicacion:i})}})})}),(0,i.jsx)(r.ZP,{item:!0,xs:12,md:6,lg:2,children:(0,i.jsx)(t.Z,{children:(0,i.jsx)(j.Z,{label:"Persona que atiende",variant:"outlined",fullWidth:!0,autoComplete:"off",value:l.personaQueAtiende,onChange:e=>{let{target:{value:i}}=e;return n({...l,personaQueAtiende:i})}})})}),(0,i.jsx)(r.ZP,{item:!0,xs:12,md:6,lg:2,children:(0,i.jsx)(t.Z,{children:(0,i.jsx)(W.h1,{label:"Seller padre",type:"noParent",value:l.seller,onChange:e=>n({...l,seller:e})})})}),(0,i.jsx)(r.ZP,{item:!0,xs:12,md:6,lg:6,container:!0,spacing:0,direction:"column",justifyContent:"center",children:(0,i.jsxs)(g.Z,{color:"primary","aria-label":"upload picture",component:"label",children:[(0,i.jsx)("input",{hidden:!0,accept:"image/*",type:"file",onChange:e=>{let i=e.target.files;i&&i.length>0&&n({...l,image:i[0]})}}),(0,i.jsx)(p.Z,{fontSize:"large"}),(0,i.jsxs)(h.Z,{variant:"subtitle1",gutterBottom:!0,sx:{mt:1},children:[l.image&&l.image.name.substring(0,10),"..."]})]})}),(0,i.jsx)(r.ZP,{item:!0,xs:12,md:6,lg:6,children:(0,i.jsx)(a.Z,{variant:"contained",startIcon:(0,i.jsx)(en.Z,{}),fullWidth:!0,onClick:()=>n(d),children:"Reinciar Formulario"})}),(0,i.jsx)(r.ZP,{item:!0,xs:12,md:6,lg:6,children:c?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("center",{children:"Imagen Seleccionada"}),(0,i.jsx)("center",{children:(0,i.jsx)(A(),{src:c,alt:"",width:350,height:350})})]}):Object.keys(o).length?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("center",{children:"Imagen Seleccionada"}),(0,i.jsx)("center",{children:(0,i.jsx)(A(),{src:(0,T.F)(o.image),alt:"",width:350,height:350})})]}):null})]})};function er(e){let{children:l,value:n,index:r,...t}=e;return(0,i.jsx)("div",{role:"tabpanel",hidden:n!==r,id:"full-width-tabpanel-".concat(r),"aria-labelledby":"full-width-tab-".concat(r),...t,children:n===r&&(0,i.jsx)(m.Z,{sx:{p:3},children:(0,i.jsx)(h.Z,{children:l})})})}function et(e){return{id:"full-width-tab-".concat(e),"aria-controls":"full-width-tabpanel-".concat(e)}}function ea(e){let{form:l,setForm:n,initialForm:r,sellerSelected:t}=e,a=(0,o.Z)(),[h,j]=s.useState(0),g=(e,l)=>{j(l)},p=e=>{j(e)};return(0,i.jsxs)(m.Z,{sx:{bgcolor:"background.paper"},children:[(0,i.jsx)(c.Z,{position:"static",children:(0,i.jsxs)(u.Z,{value:h,onChange:g,indicatorColor:"secondary",textColor:"inherit",variant:"fullWidth","aria-label":"full width tabs example",children:[(0,i.jsx)(x.Z,{label:"General",...et(0)}),(0,i.jsx)(x.Z,{label:"Referencias",...et(1)}),(0,i.jsx)(x.Z,{label:"Telefonos",...et(2)})]})}),(0,i.jsxs)(d.ZP,{axis:"rtl"===a.direction?"x-reverse":"x",index:h,onChangeIndex:p,children:[(0,i.jsx)(er,{value:h,index:0,dir:a.direction,children:(0,i.jsx)(ei,{form:l,setForm:n,initialForm:r,sellerSelected:t})}),(0,i.jsx)(er,{value:h,index:1,dir:a.direction,children:(0,i.jsx)(J,{form:l,setForm:n,sellerSelected:t})}),(0,i.jsx)(er,{value:h,index:2,dir:a.direction,children:(0,i.jsx)(el,{form:l,setForm:n})})]})]})}var es=n(6818),ed=n(7889),eo=n(8274),ec=n(594);let eu={id:"",nombre:"",estado:null,municipio:null,ciudad:null,colonia:"",calle:"",numero:"",cp:"",linkUbicacion:"",personaQueAtiende:"",seller:null,image:null,referencias:[],telefonos:[]},ex=e=>{let{closeForm:l,getSellers:n,sellerSelected:t}=e,[d,o]=(0,s.useState)(eu),[c,u]=(0,s.useState)(0),{notify:x}=(0,ed.d)();(0,s.useEffect)(()=>{if(Object.keys(t).length&&!c){var e,l,n,i,r,a,s,d;console.log({sellerSelected:t}),u(t.id),o({id:t.uuid,nombre:t.nombre,estado:null!==(e=t.estado)&&void 0!==e?e:"",municipio:null!==(l=t.municipio)&&void 0!==l?l:"",ciudad:null!==(n=t.ciudad)&&void 0!==n?n:"",colonia:null!==(i=t.colonia)&&void 0!==i?i:"",calle:null!==(r=t.calle)&&void 0!==r?r:"",numero:null!==(a=t.numero)&&void 0!==a?a:"",cp:null!==(s=t.cp)&&void 0!==s?s:"",linkUbicacion:t.linkUbicacion,personaQueAtiende:null!==(d=t.personaQueAtiende)&&void 0!==d?d:"",seller:t.parent?{id:t.parent.id,uuid:t.parent.uuid,nombre:t.parent.nombre}:null,image:null,referencias:t.references.map(e=>({id:"".concat(e.id),description:e.description,linkUbicacion:e.link,image:null,order:e.order})),telefonos:t.referencePhones.map(e=>({id:"".concat(e.id),name:e.name,phone:e.phone,order:e.order}))})}},[t,c]);let h=()=>{var e;let i=d.id.trim();if(!i)return x("Agregue un ID");let r=d.nombre.trim();if(!r)return x("Agregue un nombre");let t=d.estado,a=d.municipio,s=d.ciudad,h=d.colonia.trim(),m=d.calle.trim(),j=d.numero.trim(),g=d.cp.trim(),p=d.linkUbicacion.trim();if(!p)return x("Agregue el link de la ubicacion");let Z=d.image;if(!Z&&!c)return x("Agregue una imagen del seller");let f=d.personaQueAtiende.trim(),b=null===(e=d.seller)||void 0===e?void 0:e.id,v=d.referencias,k=d.telefonos,C=new FormData;if(C.append("uuid",i),C.append("nombre",r),t&&C.append("estado",t),a&&C.append("municipio",a),s&&C.append("ciudad",s),h&&C.append("colonia",h),m&&C.append("calle",m),j&&C.append("numero",j),g&&C.append("cp",g),C.append("linkUbicacion",p),Z&&C.append("image",Z),f&&C.append("personaQueAtiende",f),b&&C.append("idGroup",b.toString()),v.length){C.append("referencias",JSON.stringify(v.map(e=>{var l;return{...e,image:(null===(l=e.image)||void 0===l?void 0:l.name)||""}})));for(let P=0,w=v.length;P<w;P++){let y=v[P];y.image&&C.append("refImage",y.image,y.image.name)}}k.length&&C.append("telefonos",JSON.stringify(k));let F=()=>{x("Seller ".concat(c?"actualizado":"creado"," correctamente"),"success"),o(eu),n(),l(),u(0)};c?eo.Fz.update(c,C).then(()=>F()).catch(e=>{var l,n;return x((null===(l=e.response)||void 0===l?void 0:null===(n=l.data)||void 0===n?void 0:n.message)||e.message)}):eo.Fz.create(C).then(()=>F()).catch(e=>{var l,n;return x((null===(l=e.response)||void 0===l?void 0:null===(n=l.data)||void 0===n?void 0:n.message)||e.message)})};return(0,i.jsxs)(r.ZP,{container:!0,spacing:1,children:[(0,i.jsx)(r.ZP,{item:!0,xs:12,md:12,lg:12,children:(0,i.jsx)(ea,{sellerSelected:t,form:d,setForm:o,initialForm:eu})}),(0,i.jsx)(r.ZP,{item:!0,xs:6,md:6,lg:6,children:(0,i.jsx)(a.Z,{fullWidth:!0,startIcon:(0,i.jsx)(ec.Z,{}),variant:"outlined",onClick:()=>{l(),u(0)},children:"Cancelar"})}),(0,i.jsx)(r.ZP,{item:!0,xs:6,md:6,lg:6,children:(0,i.jsx)(a.Z,{fullWidth:!0,startIcon:(0,i.jsx)(es.Z,{}),variant:"contained",onClick:h,children:"Guardar"})})]})};var eh=n(3816),em=n(7908),ej=n(1459),eg=n(3795),ep=n(4112);function eZ(e){let{sellers:l,setSellerSelected:n,setAction:r,getSellers:a}=e,{notify:s}=(0,ep.d)();return(0,i.jsx)(I.Z,{component:t.Z,children:(0,i.jsxs)(R.Z,{sx:{minWidth:700},"aria-label":"customized table",children:[(0,i.jsx)(D.Z,{children:(0,i.jsxs)(eh.Z,{children:[(0,i.jsx)(W.Yk,{children:"ID"}),(0,i.jsx)(W.Yk,{children:"UUID"}),(0,i.jsx)(W.Yk,{children:"Nombre"}),(0,i.jsx)(W.Yk,{children:"Ubicacion"}),(0,i.jsx)(W.Yk,{children:"Imagen"}),(0,i.jsx)(W.Yk,{children:"Ids, sucursales"}),(0,i.jsx)(W.Yk,{children:"Telefonos"}),(0,i.jsx)(W.Yk,{children:"Ultima Actualizacion"}),(0,i.jsx)(W.Yk,{align:"center",children:"Detalles"}),(0,i.jsx)(W.Yk,{align:"center",children:"Acciones"})]})}),(0,i.jsx)(Y.Z,{children:l.map(e=>(0,i.jsxs)(W.AF,{children:[(0,i.jsx)(W.Yk,{component:"th",scope:"seller",children:e.id}),(0,i.jsx)(W.Yk,{children:e.uuid}),(0,i.jsx)(W.Yk,{children:e.nombre}),(0,i.jsx)(W.Yk,{children:(0,i.jsx)(h.Z,{sx:{display:"inline"},component:eg.Z,color:"text.primary",children:(0,i.jsx)(eg.Z,{href:e.linkUbicacion,underline:"none",target:"_blank",children:e.linkUbicacion})})}),(0,i.jsx)(W.Yk,{children:(0,i.jsx)(A(),{src:(0,T.F)(e.image),alt:e.image,width:125,height:125})}),(0,i.jsx)(W.Yk,{children:e.sellers.map(e=>e.uuid).join(" - ")}),(0,i.jsx)(W.Yk,{children:e.referencePhones.map(e=>e.phone).join(" - ")}),(0,i.jsx)(W.Yk,{children:(0,ej.j)(e.updatedAt)}),(0,i.jsx)(W.Yk,{align:"center",children:(0,i.jsx)(em.Z,{style:{cursor:"pointer"},color:"primary",onClick:()=>n(e)})}),(0,i.jsx)(W.Yk,{align:"center",children:(0,i.jsxs)(S.Z,{"aria-label":"outlined primary button group",children:[(0,i.jsx)(g.Z,{color:"warning","aria-label":"update row",component:"label",onClick:()=>{n(e),r("edit")},children:(0,i.jsx)(y.Z,{})}),(0,i.jsx)(g.Z,{color:"error","aria-label":"delete row",component:"label",onClick:()=>{eo.Fz.remove(e.id).then(()=>{s("Seller eliminado correctamente","success"),a()}).catch(e=>{var l,n;return s((null===(l=e.response)||void 0===l?void 0:null===(n=l.data)||void 0===n?void 0:n.message)||e.message)})},children:(0,i.jsx)(F.Z,{})})]})})]},e.id))})]})})}var ef=n(3318),eb=n(948),ev=n(8462),ek=n(7212),eC=n(9334),eP=n(7720),ew=n(6242),ey=n(9974),eF=n(3965);let eS={width:"100%",bgcolor:"background.paper"};function eU(e){let{details:l}=e;return(0,i.jsx)(ev.Z,{sx:eS,component:"nav","aria-label":"mailbox folders",children:l.map(e=>(0,i.jsxs)("div",{children:[(0,i.jsx)(ek.ZP,{children:(0,i.jsx)(eC.Z,{primary:e.value,secondary:e.label})}),(0,i.jsx)(eP.Z,{})]},e.label))})}let eA=(0,eb.ZP)(r.ZP)(e=>{let{theme:l}=e;return{width:"100%",...l.typography.body2,'& [role="separator"]':{margin:l.spacing(0,2)}}});function eW(e){let{sellerSelected:l}=e;return(0,i.jsxs)(eA,{container:!0,children:[(0,i.jsx)(eA,{item:!0,xs:12,sm:12,md:12,children:(0,i.jsx)("center",{children:(0,i.jsx)(ew.Z,{sx:{maxWidth:345},children:(0,i.jsx)(ey.Z,{children:(0,i.jsx)(eF.Z,{component:"img",height:"300",image:(0,T.F)(l.image),alt:l.nombre})})})})}),(0,i.jsx)(eA,{item:!0,xs:!0,children:(0,i.jsx)(eU,{details:[{label:"ID",value:l.id},{label:"UUID",value:l.uuid},{label:"Nombre",value:l.nombre},{label:"Link de la ubicacion",value:(0,i.jsx)(h.Z,{sx:{display:"inline"},component:eg.Z,color:"text.primary",children:(0,i.jsx)(eg.Z,{href:l.linkUbicacion,underline:"none",target:"_blank",children:l.linkUbicacion})})},{label:"Persona que atiende",value:l.personaQueAtiende},{label:"Fecha de creacion",value:(0,ej.j)(l.createdAt)},{label:"Ultima Actualizacion",value:(0,ej.j)(l.updatedAt)}]})}),(0,i.jsx)(eP.Z,{orientation:"vertical",flexItem:!0,children:"Direccion"}),(0,i.jsx)(eA,{item:!0,xs:!0,children:(0,i.jsx)(eU,{details:[{label:"Estado",value:l.estado},{label:"Municipio",value:l.municipio},{label:"Ciudad",value:l.ciudad},{label:"Colonia",value:l.colonia},{label:"Calle",value:l.calle},{label:"Numero",value:l.numero},{label:"C.P.",value:l.cp}]})})]})}var eR=n(4267),eY=function(e){let{sellerSelected:l}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(r.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:l.references.map(e=>(0,i.jsx)(r.ZP,{item:!0,xs:2,sm:4,md:4,children:(0,i.jsx)(ew.Z,{sx:{maxWidth:345},children:(0,i.jsxs)(ey.Z,{children:[e.image&&(0,i.jsx)(eF.Z,{component:"img",height:"140",image:(0,T.F)(e.image),alt:e.description}),(0,i.jsxs)(eR.Z,{children:[(0,i.jsx)(h.Z,{sx:{display:"inline"},component:eg.Z,color:"text.primary",children:(0,i.jsx)(eg.Z,{href:e.link,underline:"none",target:"_blank",children:e.link})}),(0,i.jsx)(h.Z,{variant:"body2",color:"text.secondary",children:e.description})]})]})})},e.id))})})},eI=function(e){let{sellerSelected:l}=e;return(0,i.jsx)(I.Z,{component:t.Z,children:(0,i.jsxs)(R.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,i.jsx)(D.Z,{children:(0,i.jsxs)(eh.Z,{children:[(0,i.jsx)(W.Yk,{children:"Nombre"}),(0,i.jsx)(W.Yk,{children:"Telefono"})]})}),(0,i.jsx)(Y.Z,{children:l.referencePhones.map(e=>(0,i.jsxs)(W.AF,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,i.jsx)(W.Yk,{component:"th",scope:"row",children:e.name}),(0,i.jsx)(W.Yk,{children:e.phone})]},e.id))})]})})},eD=function(e){let{sellerSelected:l}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(r.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:l.sellers.map(e=>(0,i.jsx)(r.ZP,{item:!0,xs:2,sm:4,md:4,children:(0,i.jsx)(ew.Z,{sx:{maxWidth:345},children:(0,i.jsxs)(ey.Z,{children:[e.image&&(0,i.jsx)(eF.Z,{component:"img",height:"140",image:(0,T.F)(e.image),alt:e.nombre}),(0,i.jsxs)(eR.Z,{children:[(0,i.jsx)(h.Z,{sx:{display:"inline"},component:eg.Z,color:"text.primary",children:(0,i.jsx)(eg.Z,{href:e.linkUbicacion,underline:"none",target:"_blank",children:e.linkUbicacion})}),(0,i.jsx)(h.Z,{variant:"body2",color:"text.secondary",children:e.nombre})]})]})})},e.id))})})};function eO(e){let{children:l,value:n,index:r,...t}=e;return(0,i.jsx)("div",{role:"tabpanel",hidden:n!==r,id:"full-width-tabpanel-".concat(r),"aria-labelledby":"full-width-tab-".concat(r),...t,children:n===r&&(0,i.jsx)(m.Z,{sx:{p:3},children:(0,i.jsx)(h.Z,{children:l})})})}function eN(e){return{id:"full-width-tab-".concat(e),"aria-controls":"full-width-tabpanel-".concat(e)}}function eE(e){let{sellerSelected:l}=e,n=(0,o.Z)(),[r,t]=s.useState(0),a=(e,l)=>{t(l)},h=e=>{t(e)};return(0,i.jsxs)(m.Z,{sx:{bgcolor:"background.paper"},children:[(0,i.jsx)(c.Z,{position:"static",children:(0,i.jsxs)(u.Z,{value:r,onChange:a,indicatorColor:"secondary",textColor:"inherit",variant:"fullWidth","aria-label":"full width tabs example",children:[(0,i.jsx)(x.Z,{label:"General",...eN(0)}),l.references.length&&(0,i.jsx)(x.Z,{label:"Referencias",...eN(1)}),l.referencePhones.length&&(0,i.jsx)(x.Z,{label:"Telefonos",...eN(2)}),l.sellers.length&&(0,i.jsx)(x.Z,{label:"Sucursales",...eN(3)})]})}),(0,i.jsxs)(d.ZP,{axis:"rtl"===n.direction?"x-reverse":"x",index:r,onChangeIndex:h,children:[(0,i.jsx)(eO,{value:r,index:0,dir:n.direction,children:(0,i.jsx)(eW,{sellerSelected:l})}),l.references.length&&(0,i.jsx)(eO,{value:r,index:1,dir:n.direction,children:(0,i.jsx)(eY,{sellerSelected:l})}),l.referencePhones.length&&(0,i.jsx)(eO,{value:r,index:2,dir:n.direction,children:(0,i.jsx)(eI,{sellerSelected:l})}),l.sellers.length&&(0,i.jsx)(eO,{value:r,index:3,dir:n.direction,children:(0,i.jsx)(eD,{sellerSelected:l})})]})]})}let e_=(0,eb.ZP)(N.Z)(e=>{let{theme:l}=e;return{"& .MuiDialogContent-root":{padding:l.spacing(2)},"& .MuiDialogActions-root":{padding:l.spacing(1)}}});function ez(e){let{children:l,onClose:n,...r}=e;return(0,i.jsxs)(z.Z,{sx:{m:0,p:2},...r,children:[l,n?(0,i.jsx)(g.Z,{"aria-label":"close",onClick:n,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,i.jsx)(ec.Z,{})}):null]})}function eH(e){let{sellerSelected:l,setSellerSelected:n}=e,r=()=>{n({})};return(0,i.jsxs)(e_,{onClose:r,"aria-labelledby":"customized-dialog-seller",open:!!Object.keys(l).length,fullWidth:!0,maxWidth:"lg",children:[(0,i.jsxs)(ez,{id:"customized-dialog-seller",onClose:r,children:["Detalles del seller: ",null==l?void 0:l.nombre]}),(0,i.jsx)(_.Z,{dividers:!0,children:Object.keys(l).length&&(0,i.jsx)(eE,{sellerSelected:l})}),(0,i.jsx)(E.Z,{})]})}var eL=n(9069),eT=n(4162);let eQ=e=>{let{filters:l,setFilters:n}=e;return(0,i.jsxs)(r.ZP,{container:!0,spacing:1,children:[(0,i.jsx)(r.ZP,{item:!0,xs:12,md:12,lg:12,children:(0,i.jsxs)(h.Z,{variant:"subtitle1",gutterBottom:!0,children:["Filtros ",(0,i.jsx)(eT.Z,{sx:{mt:3}})]})}),(0,i.jsx)(r.ZP,{item:!0,xs:12,md:6,lg:1,children:(0,i.jsx)(t.Z,{children:(0,i.jsx)(j.Z,{type:"number",label:"ID",variant:"outlined",fullWidth:!0,value:l.id,onChange:e=>{let{target:{value:i}}=e;return n({...l,id:i})}})})}),(0,i.jsx)(r.ZP,{item:!0,xs:12,md:6,lg:1,children:(0,i.jsx)(t.Z,{children:(0,i.jsx)(j.Z,{label:"UUID",variant:"outlined",fullWidth:!0,value:l.uuid,onChange:e=>{let{target:{value:i}}=e;return n({...l,uuid:i})}})})}),(0,i.jsx)(r.ZP,{item:!0,xs:12,md:6,lg:2,children:(0,i.jsx)(t.Z,{children:(0,i.jsx)(j.Z,{label:"Nombre",variant:"outlined",fullWidth:!0,value:l.nombre,onChange:e=>{let{target:{value:i}}=e;return n({...l,nombre:i})}})})}),(0,i.jsx)(r.ZP,{item:!0,xs:12,md:6,lg:2,children:(0,i.jsx)(t.Z,{children:(0,i.jsx)(W.EV,{entidad:l.estado,setEntidad:e=>{e?n({...l,estado:e}):n({...l,estado:e,municipio:null,ciudad:null})}})})}),(0,i.jsx)(r.ZP,{item:!0,xs:12,md:6,lg:2,children:(0,i.jsx)(t.Z,{children:(0,i.jsx)(W.tF,{entidad:l.estado,municipio:l.municipio,setMunicipio:e=>{e?n({...l,municipio:e}):n({...l,municipio:e,ciudad:null})}})})}),(0,i.jsx)(r.ZP,{item:!0,xs:12,md:6,lg:2,children:(0,i.jsx)(t.Z,{children:(0,i.jsx)(W.E5,{entidad:l.estado,municipio:l.municipio,ciudad:l.ciudad,setCiudad:e=>n({...l,ciudad:e})})})})]})},eM={id:"",uuid:"",nombre:"",personaQueAtiende:"",estado:null,municipio:null,ciudad:null};var eG=function(){let[e,l]=(0,s.useState)(""),[n,d]=(0,s.useState)([]),[o,c]=(0,s.useState)({}),{filters:u,setFilters:x,querystring:h}=(0,ep.m)(eM),m=()=>{eo.Fz.getAll(h).then(d)};return(0,s.useEffect)(()=>{m()},[h]),(0,i.jsxs)(ef.Z,{title:"Sellers",children:[""===e&&(0,i.jsx)(eH,{sellerSelected:o,setSellerSelected:c}),(0,i.jsxs)(r.ZP,{container:!0,spacing:1,children:[""===e&&(0,i.jsx)(r.ZP,{item:!0,xs:12,md:12,lg:12,children:(0,i.jsx)(S.Z,{variant:"contained","aria-label":"outlined primary button group",children:(0,i.jsx)(a.Z,{startIcon:(0,i.jsx)(eL.Z,{}),onClick:()=>l("add"),children:"Agregar"})})}),["add","edit"].includes(e)&&(0,i.jsx)(r.ZP,{item:!0,xs:12,md:12,lg:12,children:(0,i.jsx)(t.Z,{sx:{p:2},children:(0,i.jsx)(ex,{sellerSelected:o,getSellers:m,closeForm:()=>{c({}),l("")}})})}),""===e&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.ZP,{item:!0,xs:12,md:12,lg:12,children:(0,i.jsx)(eQ,{filters:u,setFilters:x})}),(0,i.jsx)(r.ZP,{item:!0,xs:12,md:12,lg:12,children:(0,i.jsx)(eZ,{sellers:n,setSellerSelected:c,setAction:l,getSellers:m})})]})]})]})}},7279:function(e,l,n){"use strict";n.d(l,{F:function(){return i}});let i=e=>"https://api.transportesferreira.com/static/images/sellers/".concat(e)}},function(e){e.O(0,[885,58,519,161,786,965,840,507,472,597,774,888,179],function(){return e(e.s=2676)}),_N_E=e.O()}]);