(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[108],{4137:function(e,t,l){"use strict";var n=l(4836);t.Z=void 0;var a=n(l(4938)),r=l(5893),i=(0,a.default)((0,r.jsx)("path",{d:"M18 2h-8L4 8v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-6 15-4-4h3V9.02L13 9v4h3l-4 4z"}),"SimCardDownload");t.Z=i},9447:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reportes",function(){return l(5375)}])},5375:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return M}});var n=l(5893),a=l(6886),r=l(3318),i=l(8110),s=l(2359),o=l(5188),d=l(3345),c=l(629),x=l(1903),h=l(6863),u=l(1057),j=l(7294),m=l(4137),g=l(7357),f=l(7922),b=l(3946),p=l(7906),y=l(295),D=l(2882),v=l(3184),Z=l(5861),C=l(5503),k=l(813),w=l(5248),S=l(1459),Y=l(9091);function z(e){let{row:t,numero:l}=e,[a,r]=j.useState(!1);return(0,n.jsxs)(j.Fragment,{children:[(0,n.jsxs)(w.AF,{sx:{"& > *":{borderBottom:"unset"}},children:[(0,n.jsx)(w.Yk,{children:(0,n.jsx)(b.Z,{"aria-label":"expand row",size:"small",onClick:()=>r(!a),children:a?(0,n.jsx)(k.Z,{}):(0,n.jsx)(C.Z,{})})}),(0,n.jsx)(w.Yk,{component:"th",scope:"row",children:l}),(0,n.jsx)(w.Yk,{children:(0,S.p6)(t.date)}),(0,n.jsx)(w.Yk,{children:t.car.placa}),(0,n.jsx)(w.Yk,{children:t.user.name}),(0,n.jsx)(w.Yk,{children:Y.z.format(Number(t.pago))})]}),(0,n.jsx)(w.AF,{children:(0,n.jsx)(w.Yk,{style:{paddingBottom:0,paddingTop:0},colSpan:6,children:(0,n.jsx)(f.Z,{in:a,timeout:"auto",unmountOnExit:!0,children:(0,n.jsxs)(g.Z,{sx:{margin:1},children:[(0,n.jsx)(Z.Z,{variant:"h6",gutterBottom:!0,component:"div",children:"Puntos"}),(0,n.jsxs)(p.Z,{size:"small","aria-label":"purchases",children:[(0,n.jsx)(v.Z,{children:(0,n.jsxs)(w.AF,{children:[(0,n.jsx)(w.Yk,{children:"Punto"}),(0,n.jsx)(w.Yk,{children:"UUID"}),(0,n.jsx)(w.Yk,{children:"Nombre"})]})}),(0,n.jsx)(y.Z,{children:t.sellers.map((e,t)=>(0,n.jsxs)(w.AF,{children:[(0,n.jsx)(w.Yk,{component:"th",scope:"row",children:t+1}),(0,n.jsx)(w.Yk,{children:e.uuid}),(0,n.jsx)(w.Yk,{children:e.nombre})]},e.id))})]})]})})})})]})}function F(e){let{data:t}=e,l=(0,j.useMemo)(()=>Y.z.format(t.reduce(function(e,t){return e+Number(t.pago)},0)),[t]);return(0,n.jsx)(D.Z,{component:c.Z,children:(0,n.jsxs)(p.Z,{"aria-label":"collapsible table",children:[(0,n.jsx)(v.Z,{children:(0,n.jsxs)(w.AF,{children:[(0,n.jsx)(w.Yk,{}),(0,n.jsx)(w.Yk,{children:"Numero"}),(0,n.jsx)(w.Yk,{children:"Fecha Ruta"}),(0,n.jsx)(w.Yk,{children:"Placas"}),(0,n.jsx)(w.Yk,{children:"Operador"}),(0,n.jsx)(w.Yk,{children:"Pago"})]})}),(0,n.jsxs)(y.Z,{children:[t.map((e,t)=>(0,n.jsx)(z,{row:e,numero:t+1},e.id)),!!t.length&&(0,n.jsxs)(w.AF,{children:[(0,n.jsx)(w.Yk,{colSpan:4}),(0,n.jsx)(w.Yk,{children:"Total"}),(0,n.jsx)(w.Yk,{children:l})]})]})]})})}var A=l(6470),N=l(9529);let _=N.mM.create({body:{paddingTop:35,paddingBottom:65,paddingHorizontal:35},title:{fontSize:18,textAlign:"center",fontFamily:"Oswald"},author:{fontSize:12,textAlign:"center",marginBottom:20},subtitle:{fontSize:15,margin:2,fontFamily:"Oswald"},text:{margin:12,fontSize:14,textAlign:"justify",fontFamily:"Times-Roman"},image:{marginHorizontal:150,width:250,height:150},imageRef:{marginHorizontal:50,width:100},header:{fontSize:12,marginBottom:5,textAlign:"center",color:"grey"},pageNumber:{position:"absolute",fontSize:12,bottom:30,left:0,right:0,textAlign:"center",color:"grey"},link:{fontFamily:"Lato",fontSize:10,color:"black",textDecoration:"none",alignSelf:"flex-end",justifySelf:"flex-end"}}),L=N.mM.create({table:{width:"auto",borderStyle:"solid",borderWidth:1,borderRightWidth:0,borderBottomWidth:0},tableRow:{margin:"auto",flexDirection:"row"},tableRowHead:{margin:"auto",flexDirection:"row",backgroundColor:"#1976D2",color:"white"},tableCol:{width:"20%",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0},tableCell:{margin:"auto",marginTop:5,fontSize:10}});N.Zx.register({family:"Oswald",src:"https://fonts.gstatic.com/s/oswald/v13/Y_TKV6o8WovbUd3m_X9aAA.ttf"});let P=e=>{let{children:t,...l}=e;return(0,n.jsx)(N.xv,{style:_.subtitle,...l,children:t})};function G(){return(0,n.jsxs)(N.G7,{style:L.tableRowHead,children:[(0,n.jsx)(N.G7,{style:L.tableCol,children:(0,n.jsx)(N.xv,{style:L.tableCell,children:"Numero"})}),(0,n.jsx)(N.G7,{style:L.tableCol,children:(0,n.jsx)(N.xv,{style:L.tableCell,children:"Fecha"})}),(0,n.jsx)(N.G7,{style:L.tableCol,children:(0,n.jsx)(N.xv,{style:L.tableCell,children:"Placas"})}),(0,n.jsx)(N.G7,{style:L.tableCol,children:(0,n.jsx)(N.xv,{style:L.tableCell,children:"Operador"})}),(0,n.jsx)(N.G7,{style:L.tableCol,children:(0,n.jsx)(N.xv,{style:L.tableCell,children:"Pago"})})]})}let T=e=>{let{data:t,startDate:l,endDate:a,logistica:r}=e,i=(0,j.useMemo)(()=>Y.z.format(t.reduce(function(e,t){return e+Number(t.pago)},0)),[t]);return(0,n.jsx)(N.BB,{children:(0,n.jsxs)(N.T3,{size:"A4",style:_.body,wrap:!0,children:[(0,n.jsx)(N.xv,{style:_.header,fixed:!0,children:"~ Transportes Ferreira  ~"}),(0,n.jsx)(P,{children:r}),(0,n.jsxs)(N.xv,{style:_.text,children:["del ","".concat(l," al ").concat(a)]}),(0,n.jsx)(P,{children:"Total a pagar"}),(0,n.jsx)(N.xv,{style:_.text,children:i}),(0,n.jsxs)(N.G7,{style:L.table,children:[(0,n.jsx)(G,{}),t.map((e,t)=>(0,n.jsxs)(N.G7,{style:L.tableRow,children:[(0,n.jsx)(N.G7,{style:L.tableCol,children:(0,n.jsx)(N.xv,{style:L.tableCell,children:t+1})}),(0,n.jsx)(N.G7,{style:L.tableCol,children:(0,n.jsx)(N.xv,{style:L.tableCell,children:(0,S.p6)(e.date)})}),(0,n.jsx)(N.G7,{style:L.tableCol,children:(0,n.jsx)(N.xv,{style:L.tableCell,children:e.car.placa})}),(0,n.jsx)(N.G7,{style:L.tableCol,children:(0,n.jsx)(N.xv,{style:L.tableCell,children:e.user.name})}),(0,n.jsx)(N.G7,{style:L.tableCol,children:(0,n.jsx)(N.xv,{style:L.tableCell,children:Y.z.format(Number(e.pago))})})]},e.id))]}),(0,n.jsx)(N.xv,{style:_.pageNumber,render:e=>{let{pageNumber:t,totalPages:l}=e;return"".concat(t," / ").concat(l)},fixed:!0})]})})};var I=l(3162),M=function(){let[e,t]=(0,j.useState)({startDate:null,endDate:null,logistica:null}),[l,g]=(0,j.useState)([]);(0,j.useEffect)(()=>{e.startDate&&e.endDate&&"Invalid Date"!==e.startDate.toString()&&"Invalid Date"!==e.endDate.toString()&&e.logistica&&A.pg.getDataReport({startDate:e.startDate,endDate:e.endDate,logisticaId:e.logistica.id}).then(g)},[e]);let f=async t=>{if(e.startDate&&e.endDate&&e.logistica){let a=await (0,N.eA)((0,n.jsx)(T,{data:l,startDate:(0,S.a8)(e.startDate,"LL"),endDate:(0,S.a8)(e.endDate,"LL"),logistica:e.logistica.name})).toBlob();(0,I.saveAs)(a,t)}};return(0,n.jsx)(r.Z,{title:"Reportes",children:(0,n.jsxs)(a.ZP,{container:!0,spacing:1,children:[(0,n.jsx)(a.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,n.jsx)(c.Z,{children:(0,n.jsx)(w.yO,{value:e.logistica,onChange:l=>t({...e,logistica:l})})})}),(0,n.jsx)(a.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,n.jsx)(c.Z,{children:(0,n.jsx)(s._,{dateAdapter:i.H,locale:d.Z,children:(0,n.jsx)(o.M,{label:"Fecha Inicial",inputFormat:"dd/MM/yyyy",value:e.startDate,onChange:l=>t({...e,startDate:l}),maxDate:e.endDate,renderInput:e=>(0,n.jsx)(x.Z,{...e,fullWidth:!0,autoComplete:"off"})})})})}),(0,n.jsx)(a.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,n.jsx)(c.Z,{children:(0,n.jsx)(s._,{dateAdapter:i.H,locale:d.Z,children:(0,n.jsx)(o.M,{label:"Fecha Final",inputFormat:"dd/MM/yyyy",value:e.endDate,onChange:l=>t({...e,endDate:l}),minDate:e.startDate,renderInput:e=>(0,n.jsx)(x.Z,{...e,fullWidth:!0,autoComplete:"off"})})})})}),!!l.length&&(0,n.jsx)(a.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,n.jsx)(h.Z,{variant:"contained","aria-label":"outlined primary button group",sx:{mt:1},fullWidth:!0,children:(0,n.jsx)(u.Z,{startIcon:(0,n.jsx)(m.Z,{}),onClick:()=>{e.startDate&&e.endDate&&"Invalid Date"!==e.startDate.toString()&&"Invalid Date"!==e.endDate.toString()&&e.logistica&&f("".concat(e.logistica.name," del ").concat((0,S.a8)(e.startDate,"l")," al ").concat((0,S.a8)(e.endDate,"l"),".pdf"))},children:"Descargar Reporte"})})}),(0,n.jsx)(a.ZP,{item:!0,xs:12,md:12,lg:12,children:(0,n.jsx)(F,{data:l})})]})})}},1459:function(e,t,l){"use strict";l.d(t,{a8:function(){return o},j5:function(){return s},jH:function(){return r},p6:function(){return i}});var n=l(381),a=l.n(n);l(5655);let r=e=>a()(e).format("LLLL a"),i=e=>a()(e).format("LL"),s=e=>{let[t,l,n]=e.split("-");return new Date(Number(t),Number(l)-1,Number(n))},o=(e,t)=>a()(e).format(t)},9091:function(e,t,l){"use strict";l.d(t,{z:function(){return n}});let n=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"})},2480:function(){}},function(e){e.O(0,[885,186,445,111,999,681,102,633,849,649,110,540,318,774,888,179],function(){return e(e.s=9447)}),_N_E=e.O()}]);