(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[230],{3343:function(e,t,a){"use strict";var i=a(4836);t.Z=void 0;var n=i(a(4938)),c=a(5893),l=(0,n.default)((0,c.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");t.Z=l},1733:function(e,t,a){"use strict";var i=a(4836);t.Z=void 0;var n=i(a(4938)),c=a(5893),l=(0,n.default)((0,c.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.Z=l},7957:function(e,t,a){"use strict";var i=a(4836);t.Z=void 0;var n=i(a(4938)),c=a(5893),l=(0,n.default)((0,c.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");t.Z=l},1170:function(e,t,a){"use strict";var i=a(4836);t.Z=void 0;var n=i(a(4938)),c=a(5893),l=(0,n.default)([(0,c.jsx)("circle",{cx:"12",cy:"12",r:"3.2"},"0"),(0,c.jsx)("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"},"1")],"PhotoCamera");t.Z=l},6818:function(e,t,a){"use strict";var i=a(4836);t.Z=void 0;var n=i(a(4938)),c=a(5893),l=(0,n.default)((0,c.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");t.Z=l},6629:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/camionetas",function(){return a(137)}])},137:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return _}});var i=a(5893),n=a(6863),c=a(1057),l=a(6886),r=a(3318),s=a(7294),o=a(6470),d=a(629),u=a(1903),h=a(3946),m=a(6818),g=a(3343),x=a(2974),j=a(1170),p=a(5248),f=a(5675),v=a.n(f),Z=a(7279);let C={logistica:null,placa:"",image:null},b=e=>{let{setAction:t,getCamionetas:a,camionetaSelected:r,setCamionetaSelected:f}=e,[b,k]=(0,s.useState)(C),[P,w]=(0,s.useState)(0),[L,S]=(0,s.useState)(""),{notify:z}=(0,x.d$)();(0,s.useEffect)(()=>{if(!b.image){S("");return}let e=URL.createObjectURL(b.image);return S(e),()=>URL.revokeObjectURL(e)},[b]),(0,s.useEffect)(()=>{Object.keys(r).length&&!P&&(w(r.id),k({placa:r.placa,image:null,logistica:r.logistica}))},[r,P]);let _=()=>{let e=b.placa.trim(),i=b.logistica;if(!i)return z("Seleccione una logistica");if(!e)return z("Agregue la placa de la camioneta");if(!b.image&&!Object.keys(r).length)return z("Seleccione una imagen");let n=new FormData;n.append("placa",e),n.append("logisticaId",i.id.toString()),b.image&&n.append("image",b.image),P?o.BC.update(P,n).then(()=>{z("Placa actualizada correctamente","success"),t(""),a(),f({}),w(0)}).catch(e=>{var t,a;return z((null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)||e.message)}):o.BC.create(n).then(()=>{z("Placa creada correctamente","success"),t(""),a()}).catch(e=>{var t,a;return z((null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)||e.message)})};return(0,i.jsxs)(l.ZP,{container:!0,spacing:1,children:[(0,i.jsx)(l.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,i.jsx)(d.Z,{children:(0,i.jsx)(p.yO,{value:b.logistica,onChange:e=>k({...b,logistica:e})})})}),(0,i.jsx)(l.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,i.jsx)(d.Z,{children:(0,i.jsx)(u.Z,{label:"Placa",fullWidth:!0,autoComplete:"off",value:b.placa,onChange:e=>{let{target:{value:t}}=e;return k({...b,placa:t})}})})}),(0,i.jsxs)(l.ZP,{item:!0,xs:12,md:6,lg:3,children:[(0,i.jsxs)(h.Z,{color:"primary","aria-label":"upload picture",component:"label",children:[(0,i.jsx)("input",{hidden:!0,accept:"image/*",type:"file",onChange:e=>{let t=e.target.files;t&&t.length>0&&k({...b,image:t[0]})}}),(0,i.jsx)(j.Z,{})]}),L?(0,i.jsx)(v(),{src:L,alt:"",width:300,height:150}):(null==r?void 0:r.image)?(0,i.jsx)(v(),{src:(0,Z.F)(r.image,"cars"),alt:"",width:300,height:150}):null]}),(0,i.jsx)(l.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,i.jsxs)(n.Z,{"aria-label":"outlined primary button group",fullWidth:!0,children:[(0,i.jsx)(c.Z,{variant:"outlined",fullWidth:!0,startIcon:(0,i.jsx)(g.Z,{}),sx:{mt:1},onClick:()=>{t(""),f({}),w(0)},children:"Cancelar"}),(0,i.jsx)(c.Z,{variant:"contained",fullWidth:!0,startIcon:(0,i.jsx)(m.Z,{}),sx:{mt:1},onClick:_,children:"Guardar"})]})})]})};var k=a(1459),P=a(7957),w=a(1733),L=a(7586),S=function(e){let{camionetas:t,getCamionetas:a,setCamionetaSelected:c,setAction:l}=e,{notify:r}=(0,x.d$)();return(0,i.jsx)(L.Z,{rows:t,columns:["ID","Placa","Logistica","Fecha Creacion","Fecha de ultima actualizacion","Acciones"],renderListItem:e=>(0,i.jsxs)(p.AF,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,i.jsx)(p.Yk,{component:"th",scope:"row",children:e.id}),(0,i.jsx)(p.Yk,{children:e.placa}),(0,i.jsx)(p.Yk,{children:e.logistica.name}),(0,i.jsx)(p.Yk,{children:(0,k.jH)(e.createdAt)}),(0,i.jsx)(p.Yk,{children:(0,k.jH)(e.updatedAt)}),(0,i.jsx)(p.Yk,{children:(0,i.jsxs)(n.Z,{"aria-label":"outlined primary button group",children:[(0,i.jsx)(h.Z,{color:"warning","aria-label":"update row",component:"label",onClick:()=>{l("edit"),c(e)},children:(0,i.jsx)(P.Z,{})}),(0,i.jsx)(h.Z,{color:"error","aria-label":"delete row",component:"label",onClick:()=>o.BC.remove(e.id).then(()=>{r("Placa eliminada correctamente","success"),a()}).catch(e=>{var t,a;return r((null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)||e.message)}),children:(0,i.jsx)(w.Z,{})})]})})]},e.id)})},z=a(6540),_=function(){let[e,t]=(0,s.useState)(""),[a,d]=(0,s.useState)([]),[u,h]=(0,s.useState)({}),m=()=>{o.BC.getAll().then(d)};return(0,s.useEffect)(()=>{m()},[]),(0,i.jsx)(r.Z,{title:"Camionetas",children:(0,i.jsxs)(l.ZP,{container:!0,spacing:1,children:[["add","edit"].includes(e)&&(0,i.jsx)(l.ZP,{item:!0,xs:12,md:12,lg:12,children:(0,i.jsx)(b,{setAction:t,getCamionetas:m,camionetaSelected:u,setCamionetaSelected:h})}),""===e&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.ZP,{item:!0,xs:12,md:12,lg:12,children:(0,i.jsx)(n.Z,{variant:"contained","aria-label":"outlined primary button group",children:(0,i.jsx)(c.Z,{startIcon:(0,i.jsx)(z.Z,{}),onClick:()=>t("add"),children:"Agregar"})})}),(0,i.jsx)(l.ZP,{item:!0,xs:12,md:12,lg:12,children:(0,i.jsx)(S,{camionetas:a,getCamionetas:m,setCamionetaSelected:h,setAction:t})})]})]})})}},1459:function(e,t,a){"use strict";a.d(t,{a8:function(){return s},j5:function(){return r},jH:function(){return c},p6:function(){return l}});var i=a(381),n=a.n(i);a(5655);let c=e=>n()(e).format("LLLL a"),l=e=>n()(e).format("LL"),r=e=>{let[t,a,i]=e.split("-");return new Date(Number(t),Number(a)-1,Number(i))},s=(e,t)=>n()(e).format(t)},7279:function(e,t,a){"use strict";a.d(t,{F:function(){return i}});let i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sellers";return"https://api.transportesferreira.com/static/images/".concat(t,"/").concat(e)}}},function(e){e.O(0,[885,681,102,633,976,649,246,318,774,888,179],function(){return e(e.s=6629)}),_N_E=e.O()}]);