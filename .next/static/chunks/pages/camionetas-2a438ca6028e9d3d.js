(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[230],{3343:function(e,t,a){"use strict";var n=a(4836);t.Z=void 0;var i=n(a(4938)),c=a(5893),r=(0,i.default)((0,c.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");t.Z=r},1733:function(e,t,a){"use strict";var n=a(4836);t.Z=void 0;var i=n(a(4938)),c=a(5893),r=(0,i.default)((0,c.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.Z=r},7957:function(e,t,a){"use strict";var n=a(4836);t.Z=void 0;var i=n(a(4938)),c=a(5893),r=(0,i.default)((0,c.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");t.Z=r},1170:function(e,t,a){"use strict";var n=a(4836);t.Z=void 0;var i=n(a(4938)),c=a(5893),r=(0,i.default)([(0,c.jsx)("circle",{cx:"12",cy:"12",r:"3.2"},"0"),(0,c.jsx)("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"},"1")],"PhotoCamera");t.Z=r},6818:function(e,t,a){"use strict";var n=a(4836);t.Z=void 0;var i=n(a(4938)),c=a(5893),r=(0,i.default)((0,c.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");t.Z=r},6629:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/camionetas",function(){return a(137)}])},4112:function(e,t,a){"use strict";a.d(t,{m:function(){return c},d:function(){return n.d}});var n=a(7889),i=a(7294);let c=function(e){let[t,a]=(0,i.useState)(e),[n,c]=(0,i.useState)("");return(0,i.useEffect)(()=>{let e="";for(let a in t){let n=t[a];n&&(e=""===e?"?".concat(a,"=").concat(n):e+"&".concat(a,"=").concat(n))}c(e)},[t]),{filters:t,setFilters:a,querystring:n}}},7889:function(e,t,a){"use strict";a.d(t,{d:function(){return i}});var n=a(5678);let i=()=>{let e=(e,t)=>{(0,n.Am)(e,{hideProgressBar:!1,autoClose:2e3,type:null!=t?t:"warning",position:"top-right"})};return{notify:e}}},137:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return y}});var n=a(5893),i=a(6863),c=a(1057),r=a(6886),l=a(3318),s=a(7294),o=a(6308),d=a(629),u=a(1903),h=a(3946),m=a(6818),x=a(3343),j=a(4112),g=a(1170),p=a(8126),f=a(5675),v=a.n(f),Z=a(7279);let b={logistica:null,placa:"",image:null},C=e=>{let{setAction:t,getCamionetas:a,camionetaSelected:l,setCamionetaSelected:f}=e,[C,k]=(0,s.useState)(b),[P,w]=(0,s.useState)(0),[S,L]=(0,s.useState)(""),{notify:z}=(0,j.d)();(0,s.useEffect)(()=>{if(!C.image){L("");return}let e=URL.createObjectURL(C.image);return L(e),()=>URL.revokeObjectURL(e)},[C]),(0,s.useEffect)(()=>{Object.keys(l).length&&!P&&(w(l.id),k({placa:l.placa,image:null,logistica:l.logistica}))},[l,P]);let Y=()=>{let e=C.placa.trim(),n=C.logistica;if(!n)return z("Seleccione una logistica");if(!e)return z("Agregue la placa de la camioneta");if(!C.image&&!Object.keys(l).length)return z("Seleccione una imagen");let i=new FormData;i.append("placa",e),i.append("logisticaId",n.id.toString()),C.image&&i.append("image",C.image),P?o.BC.update(P,i).then(()=>{z("Placa actualizada correctamente","success"),t(""),a(),f({}),w(0)}).catch(e=>{var t,a;return z((null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)||e.message)}):o.BC.create(i).then(()=>{z("Placa creada correctamente","success"),t(""),a()}).catch(e=>{var t,a;return z((null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)||e.message)})};return(0,n.jsxs)(r.ZP,{container:!0,spacing:1,children:[(0,n.jsx)(r.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,n.jsx)(d.Z,{children:(0,n.jsx)(p.yO,{value:C.logistica,onChange:e=>k({...C,logistica:e})})})}),(0,n.jsx)(r.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,n.jsx)(d.Z,{children:(0,n.jsx)(u.Z,{label:"Placa",fullWidth:!0,autoComplete:"off",value:C.placa,onChange:e=>{let{target:{value:t}}=e;return k({...C,placa:t})}})})}),(0,n.jsxs)(r.ZP,{item:!0,xs:12,md:6,lg:3,children:[(0,n.jsxs)(h.Z,{color:"primary","aria-label":"upload picture",component:"label",children:[(0,n.jsx)("input",{hidden:!0,accept:"image/*",type:"file",onChange:e=>{let t=e.target.files;t&&t.length>0&&k({...C,image:t[0]})}}),(0,n.jsx)(g.Z,{})]}),S?(0,n.jsx)(v(),{src:S,alt:"",width:300,height:150}):(null==l?void 0:l.image)?(0,n.jsx)(v(),{src:(0,Z.F)(l.image,"cars"),alt:"",width:300,height:150}):null]}),(0,n.jsx)(r.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,n.jsxs)(i.Z,{"aria-label":"outlined primary button group",fullWidth:!0,children:[(0,n.jsx)(c.Z,{variant:"outlined",fullWidth:!0,startIcon:(0,n.jsx)(x.Z,{}),sx:{mt:1},onClick:()=>{t(""),f({}),w(0)},children:"Cancelar"}),(0,n.jsx)(c.Z,{variant:"contained",fullWidth:!0,startIcon:(0,n.jsx)(m.Z,{}),sx:{mt:1},onClick:Y,children:"Guardar"})]})})]})};var k=a(7906),P=a(295),w=a(2882),S=a(3184),L=a(1459),z=a(7957),Y=a(1733),_=function(e){let{camionetas:t,getCamionetas:a,setCamionetaSelected:c,setAction:r}=e,{notify:l}=(0,j.d)();return(0,n.jsx)(w.Z,{component:d.Z,children:(0,n.jsxs)(k.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,n.jsx)(S.Z,{children:(0,n.jsxs)(p.AF,{children:[(0,n.jsx)(p.Yk,{children:"ID"}),(0,n.jsx)(p.Yk,{children:"Placa"}),(0,n.jsx)(p.Yk,{children:"Logistica"}),(0,n.jsx)(p.Yk,{children:"Fecha Creacion"}),(0,n.jsx)(p.Yk,{children:"Fecha de ultima actualizacion"}),(0,n.jsx)(p.Yk,{children:"Acciones"})]})}),(0,n.jsx)(P.Z,{children:t.map(e=>(0,n.jsxs)(p.AF,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,n.jsx)(p.Yk,{component:"th",scope:"row",children:e.id}),(0,n.jsx)(p.Yk,{children:e.placa}),(0,n.jsx)(p.Yk,{children:e.logistica.name}),(0,n.jsx)(p.Yk,{children:(0,L.jH)(e.createdAt)}),(0,n.jsx)(p.Yk,{children:(0,L.jH)(e.updatedAt)}),(0,n.jsx)(p.Yk,{children:(0,n.jsxs)(i.Z,{"aria-label":"outlined primary button group",children:[(0,n.jsx)(h.Z,{color:"warning","aria-label":"update row",component:"label",onClick:()=>{r("edit"),c(e)},children:(0,n.jsx)(z.Z,{})}),(0,n.jsx)(h.Z,{color:"error","aria-label":"delete row",component:"label",onClick:()=>o.BC.remove(e.id).then(()=>{l("Placa eliminada correctamente","success"),a()}).catch(e=>{var t,a;return l((null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)||e.message)}),children:(0,n.jsx)(Y.Z,{})})]})})]},e.id))})]})})},A=a(6540),y=function(){let[e,t]=(0,s.useState)(""),[a,d]=(0,s.useState)([]),[u,h]=(0,s.useState)({}),m=()=>{o.BC.getAll().then(d)};return(0,s.useEffect)(()=>{m()},[]),(0,n.jsx)(l.Z,{title:"Camionetas",children:(0,n.jsxs)(r.ZP,{container:!0,spacing:1,children:[["add","edit"].includes(e)&&(0,n.jsx)(r.ZP,{item:!0,xs:12,md:12,lg:12,children:(0,n.jsx)(C,{setAction:t,getCamionetas:m,camionetaSelected:u,setCamionetaSelected:h})}),""===e&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.ZP,{item:!0,xs:12,md:12,lg:12,children:(0,n.jsx)(i.Z,{variant:"contained","aria-label":"outlined primary button group",children:(0,n.jsx)(c.Z,{startIcon:(0,n.jsx)(A.Z,{}),onClick:()=>t("add"),children:"Agregar"})})}),(0,n.jsx)(r.ZP,{item:!0,xs:12,md:12,lg:12,children:(0,n.jsx)(_,{camionetas:a,getCamionetas:m,setCamionetaSelected:h,setAction:t})})]})]})})}},1459:function(e,t,a){"use strict";a.d(t,{a8:function(){return s},j5:function(){return l},jH:function(){return c},p6:function(){return r}});var n=a(381),i=a.n(n);a(5655);let c=e=>i()(e).format("LLLL a"),r=e=>i()(e).format("LL"),l=e=>{let[t,a,n]=e.split("-");return new Date(Number(t),Number(a)-1,Number(n))},s=(e,t)=>i()(e).format(t)},7279:function(e,t,a){"use strict";a.d(t,{F:function(){return n}});let n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sellers";return"".concat("https://api.transportesferreira.com","/static/images/").concat(t,"/").concat(e)}}},function(e){e.O(0,[885,58,519,433,786,844,9,246,318,774,888,179],function(){return e(e.s=6629)}),_N_E=e.O()}]);