(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[230],{3343:function(e,t,a){"use strict";var i=a(4836);t.Z=void 0;var n=i(a(4938)),l=a(5893),c=(0,n.default)((0,l.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");t.Z=c},1733:function(e,t,a){"use strict";var i=a(4836);t.Z=void 0;var n=i(a(4938)),l=a(5893),c=(0,n.default)((0,l.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.Z=c},7957:function(e,t,a){"use strict";var i=a(4836);t.Z=void 0;var n=i(a(4938)),l=a(5893),c=(0,n.default)((0,l.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");t.Z=c},1170:function(e,t,a){"use strict";var i=a(4836);t.Z=void 0;var n=i(a(4938)),l=a(5893),c=(0,n.default)([(0,l.jsx)("circle",{cx:"12",cy:"12",r:"3.2"},"0"),(0,l.jsx)("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"},"1")],"PhotoCamera");t.Z=c},6818:function(e,t,a){"use strict";var i=a(4836);t.Z=void 0;var n=i(a(4938)),l=a(5893),c=(0,n.default)((0,l.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");t.Z=c},6629:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/camionetas",function(){return a(137)}])},137:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return z}});var i=a(5893),n=a(6863),l=a(1057),c=a(6886),s=a(3318),r=a(7294),o=a(6470),d=a(629),u=a(1903),h=a(3946),m=a(6818),g=a(3343),x=a(2974),p=a(1170),j=a(5248),v=a(5675),f=a.n(v),Z=a(7279);let C={logistica:null,placa:"",image:null},b=e=>{let{setAction:t,getCamionetas:a,camionetaSelected:s,setCamionetaSelected:v}=e,[b,P]=(0,r.useState)(C),[k,w]=(0,r.useState)(0),[S,_]=(0,r.useState)(""),{notify:z}=(0,x.d$)();(0,r.useEffect)(()=>{if(!b.image){_("");return}let e=URL.createObjectURL(b.image);return _(e),()=>URL.revokeObjectURL(e)},[b]),(0,r.useEffect)(()=>{Object.keys(s).length&&!k&&(w(s.id),P({placa:s.placa,image:null,logistica:s.logistica}))},[s,k]);let y=()=>{let e=b.placa.trim(),i=b.logistica;if(!i)return z("Seleccione una logistica");if(!e)return z("Agregue la placa de la camioneta");if(!b.image&&!Object.keys(s).length)return z("Seleccione una imagen");let n=new FormData;n.append("placa",e),n.append("logisticaId",i.id.toString()),b.image&&n.append("image",b.image),k?o.BC.update(k,n).then(()=>{z("Placa actualizada correctamente","success"),t(""),a(),v({}),w(0)}).catch(e=>{var t,a;return z((null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)||e.message)}):o.BC.create(n).then(()=>{z("Placa creada correctamente","success"),t(""),a()}).catch(e=>{var t,a;return z((null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)||e.message)})};return(0,i.jsxs)(c.ZP,{container:!0,spacing:1,children:[(0,i.jsx)(c.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,i.jsx)(d.Z,{children:(0,i.jsx)(j.yO,{value:b.logistica,onChange:e=>P({...b,logistica:e})})})}),(0,i.jsx)(c.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,i.jsx)(d.Z,{children:(0,i.jsx)(u.Z,{label:"Placa",fullWidth:!0,autoComplete:"off",value:b.placa,onChange:e=>{let{target:{value:t}}=e;return P({...b,placa:t})}})})}),(0,i.jsxs)(c.ZP,{item:!0,xs:12,md:6,lg:3,children:[(0,i.jsxs)(h.Z,{color:"primary","aria-label":"upload picture",component:"label",children:[(0,i.jsx)("input",{hidden:!0,accept:"image/*",type:"file",onChange:e=>{let t=e.target.files;t&&t.length>0&&P({...b,image:t[0]})}}),(0,i.jsx)(p.Z,{})]}),S?(0,i.jsx)(f(),{src:S,alt:"",width:300,height:150}):(null==s?void 0:s.image)?(0,i.jsx)(f(),{src:(0,Z.F)(s.image,"cars"),alt:"",width:300,height:150}):null]}),(0,i.jsx)(c.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,i.jsxs)(n.Z,{"aria-label":"outlined primary button group",fullWidth:!0,children:[(0,i.jsx)(l.Z,{variant:"outlined",fullWidth:!0,startIcon:(0,i.jsx)(g.Z,{}),sx:{mt:1},onClick:()=>{t(""),v({}),w(0)},children:"Cancelar"}),(0,i.jsx)(l.Z,{variant:"contained",fullWidth:!0,startIcon:(0,i.jsx)(m.Z,{}),sx:{mt:1},onClick:y,children:"Guardar"})]})})]})};var P=a(7957),k=a(1733),w=a(7586),S=function(e){let{camionetas:t,getCamionetas:a,setCamionetaSelected:l,setAction:c}=e,{notify:s}=(0,x.d$)();return(0,i.jsx)(w.Z,{rows:t,columns:["ID","Placa","Logistica","Acciones"],renderListItem:e=>(0,i.jsxs)(j.AF,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,i.jsx)(j.Yk,{component:"th",scope:"row",children:e.id}),(0,i.jsx)(j.Yk,{children:e.placa}),(0,i.jsx)(j.Yk,{children:e.logistica.name}),(0,i.jsx)(j.Yk,{children:(0,i.jsxs)(n.Z,{"aria-label":"outlined primary button group",children:[(0,i.jsx)(h.Z,{color:"warning","aria-label":"update row",component:"label",onClick:()=>{c("edit"),l(e)},children:(0,i.jsx)(P.Z,{})}),(0,i.jsx)(h.Z,{color:"error","aria-label":"delete row",component:"label",onClick:()=>o.BC.remove(e.id).then(()=>{s("Placa eliminada correctamente","success"),a()}).catch(e=>{var t,a;return s((null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)||e.message)}),children:(0,i.jsx)(k.Z,{})})]})})]},e.id)})},_=a(6540),z=function(){let[e,t]=(0,r.useState)(""),[a,d]=(0,r.useState)([]),[u,h]=(0,r.useState)({}),m=()=>{o.BC.getAll().then(d)};return(0,r.useEffect)(()=>{m()},[]),(0,i.jsx)(s.Z,{title:"Camionetas",children:(0,i.jsxs)(c.ZP,{container:!0,spacing:1,children:[["add","edit"].includes(e)&&(0,i.jsx)(c.ZP,{item:!0,xs:12,md:12,lg:12,children:(0,i.jsx)(b,{setAction:t,getCamionetas:m,camionetaSelected:u,setCamionetaSelected:h})}),""===e&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.ZP,{item:!0,xs:12,md:12,lg:12,children:(0,i.jsx)(n.Z,{variant:"contained","aria-label":"outlined primary button group",children:(0,i.jsx)(l.Z,{startIcon:(0,i.jsx)(_.Z,{}),onClick:()=>t("add"),children:"Agregar"})})}),(0,i.jsx)(c.ZP,{item:!0,xs:12,md:12,lg:12,children:(0,i.jsx)(S,{camionetas:a,getCamionetas:m,setCamionetaSelected:h,setAction:t})})]})]})})}},7279:function(e,t,a){"use strict";a.d(t,{F:function(){return i}});let i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sellers";return"https://api.transportesferreira.com/static/images/".concat(t,"/").concat(e)}}},function(e){e.O(0,[681,102,633,849,908,246,318,774,888,179],function(){return e(e.s=6629)}),_N_E=e.O()}]);